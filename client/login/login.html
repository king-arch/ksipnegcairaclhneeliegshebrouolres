
<template name="login" >
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-119353328-1"></script>

<script src="https://apis.google.com/js/platform.js" async defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Base64/1.0.1/base64.min.js" async defer></script>
<script src="https://connect.facebook.net/en_US/all/debug.js" async defer></script>
<!-- <meta name="google-signin-client_id" content="811376078975-gslj9rfgubco8946vjjmgod73dvho42h.apps.googleusercontent.com"> -->
  <meta charset="utf-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="google-signin-scope" content="profile email">
<meta name="google-signin-client_id" content="126159632597-e396vmihkhh8g2emu2u5n4fndktqjod9.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>


<script>


  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  var url = window.location.href;

  gtag('config', 'UA-119353328-1',{
  'page_title' :  "Login",
  'page_path': url,
  });
</script>

<body class="row main_body_bg over_on_bd" style="background-color: rgb(1, 16, 44) ! important; "> 
  {{> toplog}}
  {{> log}}
</body>
</template>

<template name="toplog ">
              <div class="row black_bg" style="padding:10px 10px; padding-bottom: 0px; margin-bottom: 0px; background-color: rgba(0, 0, 0, 0.3) none repeat scroll 0% 0% !important;">
                <form class="row" role="search" style="margin-bottom: 0px;">

                    <div class="col m12 l5 s12 form-group ">
                     <p>  <a href="/feed"> <img src="/uploads/icons/sn_logo.png" class="brand-logo" title="Special Neighborhood"> </a></p>
                    </div>
                    <div class="col m12 l3 s12 form-group">
                        <input type="email" class="form-control formal_signin login_input_box" name="email" id="login_email" placeholder="Email">
                    </div>

                    <div class="input-group col m12 l3 s12">
                                     <div id="imaginary_container"> 
                                 <div class="input-group stylish-input-group">
                              <input type="password" class="margin_inpu_search search-query form-control search_all_text_on_enter width_pass_inp" placeholder="Password" id="login_password" />
                                  <span class="input-group-addon search_format_icon show_password show_pass_log" id="show_password">
                                                 
                                           
                                                      <span class="glyphicon glyphicon-eye-open pointer " style="color: #fff;" id="sign_up_eye_open"></span>

                                                      <span class="glyphicon glyphicon-eye-close loader_visiblity_block pointer " style="color: #fff;" id="sign_up_eye_close" ></span>
                                            
                                                  
                                              </span> 
                               </div>
                                 <a href="/forgot_password" class="forgot_password login_forgot_pass" id="forgotpass" style="color: #fff !important; margin-top: 5px;">Forgot Password?</a>
                             </div>
                            
                                          <!-- <div class="input-group stylish-input-group">
                                              <input type="password" class="form-control formal_signin login_input_box"  placeholder="Password" id="login_password" style="border-radius: 5px 0 0 5px !important;" >

                                              
                                               <span class="input-group-addon search_format_icon show_password " id="show_password" style="  padding: 10px 16px 10px 24px !important;" >
                                                 
                                           
                                                      <span class="glyphicon glyphicon-eye-open pointer " style="color: #fff;" id="sign_up_eye_open"></span>

                                                      <span class="glyphicon glyphicon-eye-close loader_visiblity_block pointer " style="color: #fff;" id="sign_up_eye_close" ></span>
                                            
                                                  
                                              </span> 
                                          </div>
                                          <a href="/forgot_password" class="forgot_password login_forgot_pass" id="forgotpass" style="color: #fff !important; margin-top: 5px;">Forgot Password?</a>
                                      </div> -->
                                
                             <!--   <div id="imaginary_container">
                           <div class="input-group stylish-input-group">
                              <input type="text" class="form-control form-control formal_signin login_input_box margin_inpu_search"  placeholder="Search connection by name" id="search_all_text_conn" >
                              <span class="input-group-addon search_format_iocn">
                              <button type="submit" id="search_connection_all">
                              <span class="glyphicon glyphicon-search"></span>
                              </button>  
                              </span>
                           </div>
                        </div> -->

                   <!--  <div class="col m12 l3 s12 form-group input-group stylish-input-group">
                        <input type="password" class="form-control formal_signin login_input_box" name="password" id="login_password"
                         placeholder="Password">  <span class="input-group-addon">
                        <button type="submit">
                            <span class="glyphicon glyphicon-search"></span>
                        </button>  
                    </span> -->
                          
                    </div>
                     <div class="col m12 l1 s12 form-group">
                    <button type="submit" class="btn btn-default login_head login-btn mouse_ani"  id="login_submit">Sign in</button>
                  </div>
                   
                </form>
              </div>
</template>
<template name="log" >
{{#if users}}

<h1>{{username}}</h1>

{{/if}} 
<div class="row" style="padding:20px 10px; margin-bottom: 0px !important;">
  <div class="col s12 m12 l7">
<h4 class="left color_head_signup_left visible-lg" style="font-size: 36px !important;"> Welcome to SPECIAL NEIGHBORHOOD</h4><br/> 

<div class="clearfix"></div>

<h4 class="" style=" font-size: 27px !important; padding-top: 0px; padding-bottom:  0px; padding-left: 2%;  color: #fff!important; ">Now specially ABLED people have their own community!<br/> A place to connect, collaborate and create ...<br/> <br/> 
<a href="https://play.google.com/store/apps/details?id=com.app.specialn" target="_blank" > <img src="images/android.png" style="width:150px; float: left !important; margin-right: 20px !important;"></a> <img src="images/ios.png" style="width:150px; border: 1px solid #969696;   border-radius: 5px;"></h4>


  </div>
<div class="col s12 m12 l5">
        <div class="sign_up_form">
        
        <p class="login_join_now" style="margin-top: 0px;"> Join now</p>
                
        <form class="form with-margin" name="login-form" id="login-form">
       
        <div class="form-group"> 
          <input type="text" class="form-control login_input_box" name="username" id="username"   placeholder="Full Name">
          <span id="usernameerr" style="color:red"></span>
        </div>
        
        <div class="form-group">
              <input type="email" class="form-control login_input_box"  name="email" id="email" placeholder="Email">
        </div>
        
        <div class="form-group " >

         <div class="input-group stylish-input-group" id="imaginary_container">
          <!-- pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$"   -->
          <input type="password" class="form-control login_input_box" name="password" id="password1"  placeholder="Password (atleast 8 chars.)  ">     
                                     
           <span class="input-group-addon search_format_iocn show_password2" style="background-color: #fff !important;   
border: none; border-bottom: 1px solid #9E9E9E !important;">   
                                                  <span id="search_connection_all" class=" search_all_text_conn search_event pointer " >

                                                      <span class="glyphicon glyphicon-eye-open " style="color: #9E9E9E;" id="sign_in_eye_open" ></span>

                                                      <span class="glyphicon glyphicon-eye-close loader_visiblity_block" style="color: #9E9E9E;" id="sign_in_eye_close">  </span> 

                                                  </span>  
           </span>   

           </div>                                
          <!-- <a class=" login_forgot_pass" data-position="bottom" data-delay="50" data-tooltip="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" href="javascript:void">
            <i class="fa fa-question-circle login_forgot_pass visible-lg" ></i>
          </a>
                  <small class="login_forgot_pass" id="passerror"></small> -->
        </div>

        <div class="form-group">
        <div class="g-recaptcha" data-sitekey="6LeOWSgUAAAAALEBSN0xby2mBdfYQ3p6KpZcBjNJ"></div>
        <span id="recaptchaerr" style="color:red"></span>
        </div>    
          
        <p class="login_forgot_pass">
          <!-- By clicking Join Now, you agree to the Special Neighborhood   -->
          By clicking <strong>Join Now </strong>, you agree to <strong>Special Neighborhood's </strong>-
          <span class="text_ani"><a href="/useragreement" class="blue_text_color terms_services" target="_blank">User Agreement</a>,</span>
          <span class="text_ani"><a href="/privacy" class="blue_text_color terms_services" target="_blank">Privacy </a></span> and 
         <span class="text_ani"><a href="/cookies" class="blue_text_color terms_services" target="_blank">Cookie Policies</a></span>.
        </p>   
        <div style="height:10px; display: none;"></div>
        <div class="form-group text-center">
          <br/> 
          <label class="control-label" for=""></label>
         
                  <div class="col-md-3"> &nbsp; </div>

           <div class="col-md-6"><input type="submit" class="btn col-md-12 btn-home format_join join_btn_signup height_sub login-btn mouse_ani" id="signup" value="Join now"> 
            <br/><br/>
           <p class="center login_forgot_pass" style="margin-bottom: 11px !important;">or SIGN IN with</p> </div>
                   <div class="col-md-3"> &nbsp; </div>
                  

        </div>

            </form>     

           
                <div class="omb_login">
    
    <div class="row kpx_socialButtons" style="margin-bottom: 0px;">
          <div class="col s12 m6 l6 pad_btm_btn_social">

            <a class="btn fb_bt btn-home format_join join_btn_signup height_sub login-btn mouse_ani" data-toggle="tooltip" data-placement="top" title="Facebook" id="login_with_facebook" onclick="login()" >
              <i class="fa fa-facebook login_social_icon"></i>
              <span class="hidden-xs"></span>
            </a>
          </div>
      
 <!-- <button onclick="login()">Facebook Login</button> -->

          <input type="hidden" class="" id="login_with_fb2">
         <!--  <div class=" col s12 m6 l6 pad_btm_btn_social "  >

            <a class="btn g_bt btn-lg btn-block kpx_btn-google-plus gp height_sub login-btn mouse_ani" data-toggle="tooltip" data-placement="top" title="Google Plus" id="login_with_googleplus"  data-onsuccess="onSignIn" >  
              <i class="fa fa-google-plus login_social_icon"></i>
              <span class="hidden-xs"></span>
            </a>
          </div>  --> 
          <div class="col s6 m6 l6 pointer">
       <div id="gSignInWrapper">
            <div id="customBtn" class="customGPlusSignIn">
              <span class="icon"></span>
              <span class="buttonText"><i class="fa fa-google-plus" style="color: #fff;"></i></span>
            </div>
          </div>
        </div>
      <button class="g-signin2" id="google_login" data-onsuccess="onSignIn" onclick="click_google_login()" style="display:none !important" ></button>      
<!-- 
          <div class="col s12 m4 l4 pad_btm_btn_social  ">
                    <a  class="btn g_bt btn-lg btn-block kpx_btn-linked-in gp linkin_btn height_sub login-btn mouse_ani" data-toggle="tooltip" data-placement="top" title="Linkedin" id="login_with_linkdin" >
                      <i class="fa fa-linkedin login_social_icon"></i>
                       <span class="hidden-xs"></span>
                    </a>
                  </div>  -->

    </div>

  </div>
</div>

</div>

<div class="clearfix"></div>
  
</div>
<div class="row visible-lg" style="padding:0px 10px 20px 10px; margin-bottom: 0px !important;">
  <div class="col m12 l6 s12" >
  <p class="text-left login_forgot_pass ">
    <span style="color: #fff !important;"> Special Neighborhood <i class="fa fa-copyright"></i>, 2018.  
      <p style="color: #fff !important; font-size:10px">(Better seen in chrome and firefox browsers)</p>
    </span> 
  </p>
</div>
<div class="col m12 l6 s12" >

<p class="text-right login_forgot_pass">
    <span style="color: #fff !important;">Powered by <a href="#" style="color: #fff !important;"><strong>BITOVN</strong></a> - The neural network
    </span> 
  </p>
</div>
</div>
<div class="row hidden-lg" style="padding:0px 10px 20px 10px; margin-bottom: 0px !important;">
  <div class="col m12 l6 s12" >
  <p class="text-left login_forgot_pass text-center">
    <span style="color: #fff !important;"> Special Neighborhood <i class="fa fa-copyright"></i>, 2018.  </span> 
  </p>
</div>
<div class="col m12 l6 s12" >

<p class="text-right login_forgot_pass text-center">
    <span style="color: #fff !important;">Powered by <a href="#" style="color: #fff !important;"><strong>BITOVN</strong></a> - The neural network
    </span> 
  </p>
</div>
</div>


<script>
$(document).ready(function(){
    $('.tooltipped').tooltip({delay: 50});



  });



setTimeout(function(){
var googleUser = {};
gapi.load('auth2', initSigninV2);

function initSigninV2() {
    gapi.auth2.init({
        client_id: '126159632597-e396vmihkhh8g2emu2u5n4fndktqjod9.apps.googleusercontent.com'
    }).then(function (authInstance) {
        // now auth2 is fully initialized
    });
}

window.onLoadCallback = function(){
  gapi.auth2.init({
      client_id: '126159632597-e396vmihkhh8g2emu2u5n4fndktqjod9.apps.googleusercontent.com'
    });
}
  var startApp = function() {
    gapi.load('auth2', function(){
      // Retrieve the singleton for the GoogleAuth library and set up the client.
      auth2 = gapi.auth2.init({
        client_id: '126159632597-e396vmihkhh8g2emu2u5n4fndktqjod9.apps.googleusercontent.com',
        cookiepolicy: 'single_host_origin',
        // Request scopes in addition to 'profile' and 'email'
        //scope: 'additional_scope'
      });
      attachSignin(document.getElementById('customBtn'));
    });
  };  
  startApp();
},3000);



$('#login_with_googleplus').click(function(){


});

function attachSignin(element) {
    console.log(element.id);
    auth2.attachClickHandler(element, {},
        function(googleUser) {
        var profile = googleUser.getBasicProfile();
        console.log("ID: " + profile.getId()); // Don't send this directly to your server!
        console.log('Full Name: ' + profile.getName());
        console.log('Given Name: ' + profile.getGivenName());
        console.log('Family Name: ' + profile.getFamilyName());
        console.log("Image URL: " + profile.getImageUrl());
        console.log("Email: " + profile.getEmail());

        // The ID token you need to pass to your backend:
        var id_token = googleUser.getAuthResponse().id_token;
        // console.log("ID Token: " + id_token);
        // alert(id_token);
        // alert(profile.getName());
        // alert(profile.getEmail());
        // alert(id_token);



var getEmail = profile.getEmail();
var getName = profile.getName();
var getImageUrl = profile.getImageUrl();

var source = "Google";

        Meteor.call('check_for_google_login',getEmail,getName,getImageUrl,source,function(error,result){
              if(error){
                alert("Some error occure.");
              
              }else{

                  console.log('successfull login');
                  console.log(result);
                  var url = result.send_url;

                  if(url == '/feed'){
                      var userID = result.userID;
                      Session.setPersistent("userId",userID);
                      Router.go(url);
                  }
                  else{
                var userID = result.userID;
                Session.setPersistent("userId",userID);
                Router.go(url);

                  }


                }
          });
        

        }, function(error) {
          // alert(JSON.stringify(error, undefined, 2));
        });
  }


    function click_google_login(){
  check_if_clicked = true;
}
   function onSignIn(googleUser) {
    if(check_if_clicked == true){

  var profile = googleUser.getBasicProfile();
  console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
  console.log('Name: ' + profile.getName());
  console.log('Image URL: ' + profile.getImageUrl());
  console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.

var getEmail = profile.getEmail();
var getName = profile.getName();
var getImageUrl = profile.getImageUrl();

var source = "Google";

        Meteor.call('check_for_google_login',getEmail,getName,getImageUrl,source,function(error,result){
              if(error){
                alert("Some error occure.");
              
              }else{

                  console.log('successfull login');
                  console.log(result);
                  var url = result.send_url;

                  if(url == '/feed'){
                      var userID = result.userID;
                      Session.setPersistent("userId",userID);
                      Router.go(url);
                  }
                  else{
                var userID = result.userID;
                Session.setPersistent("userId",userID);
                Router.go(url);

                  }


                }
          });
}
}
</script>
<div id="fb-root"></div>
<script>


window.fbAsyncInit = function () {

      FB.init({
      appId      : '784566848397487',                        // App ID from the app dashboard
      status     : true,                                 // Check Facebook Login status
      xfbml      : true                                  // Look for social plugins on the page
    });
    }

    FB.AppEvents.logPageView(); 


  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));

  function login(){
        FB.login(function(response){
            if(response.status === 'connected'){
              testAPI();//getInfo();
              // alert('we are connected');
            } else if(response.status === 'not_authorized') {
                 show_alert("Not authorized");
            } else {
                show_alert("you are not logged in to Facebook");
            }

        },{scope: 'email'});
    }



    function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
   
    FB.api('/me','GET', {fields: 'first_name,last_name,email,name,id'}, function(response) {
      console.log('Successful login for: ' + response.name);
      console.log(response);
      if(response.email == "" || response.email == undefined){
          show_alert("Your privacy for Email is not public");
          return false;
      }
      // show_loading_alert("Loading, please wait");

var getEmail = response.email;
var getName = response.name;
var getImageUrl = "http://graph.facebook.com/"+response.id+"/picture?type=large";

// alert(' getEmail: '+getEmail+' getName: '+getName+' getImageUrl: '+getImageUrl);
var source = "Facebook";

      Meteor.call("check_for_facebook_login",getEmail,getName,getImageUrl,source, function(error,result){
        if(error){
          show_alert("Something went wrong while fetching details")
        }else{
                  console.log('successfull login');
                  // alert('successfull login');
                  console.log(result);
                  var url = result.send_url;

                  if(url == '/feed'){
                      var userID = result.userID;
                      Session.setPersistent("userId",userID);
                      Router.go(url);
                  }
                  else{
                var userID = result.userID;
                Session.setPersistent("userId",userID);
                Router.go(url);

                  }
      }
      });
    });
  }



</script>

 </template>

